{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8ef72386_8bb7941f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 17,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-10-31T09:50:09Z",
      "side": 1,
      "message": "Issue number is missing",
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4bb92324_d3bc09fc",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 102,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2025-10-30T18:42:47Z",
      "side": 1,
      "message": "Why not using directly `workQueue.getDefaultQueue().submit()`?",
      "range": {
        "startLine": 102,
        "startChar": 23,
        "endLine": 102,
        "endChar": 29
      },
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d1beaf81_3f1beb7b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 102,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-11-05T21:38:04Z",
      "side": 1,
      "message": "\u003e Why not using directly `workQueue.getDefaultQueue().submit()`?\n\nI need to understand when the thread is completed, hence the use of the `ExecutorCompletionService\u003c\u003e`",
      "parentUuid": "4bb92324_d3bc09fc",
      "range": {
        "startLine": 102,
        "startChar": 23,
        "endLine": 102,
        "endChar": 29
      },
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "058414db_5ac2693d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 102,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2025-11-06T08:13:34Z",
      "side": 1,
      "message": "Why do you need to know when the thread is completed? `WorkQueue` takes care of the shutdown [1].\n\nIt seems like `threadCompleted` is only used for tests.\n\n[1]: https://cs.opensource.google/gerrit/gerrit/gerrit/+/master:java/com/google/gerrit/server/git/WorkQueue.java",
      "parentUuid": "d1beaf81_3f1beb7b",
      "range": {
        "startLine": 102,
        "startChar": 23,
        "endLine": 102,
        "endChar": 29
      },
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0dfff679_5bc83e9c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 102,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-11-06T08:28:50Z",
      "side": 1,
      "message": "\u003e Why do you need to know when the thread is completed? `WorkQueue` takes care of the shutdown [1].\n\u003e \n\u003e It seems like `threadCompleted` is only used for tests.\n\nCorrect, we need it to allow the feature to be testable.",
      "parentUuid": "058414db_5ac2693d",
      "range": {
        "startLine": 102,
        "startChar": 23,
        "endLine": 102,
        "endChar": 29
      },
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "27d7179e_9c192033",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 102,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2025-11-07T07:43:59Z",
      "side": 1,
      "message": "While working on my change, I found this `ExecutorService` API which seems to fit what you are after:\n\n```\n\u003cT\u003e Future\u003cT\u003e submit(Callable\u003cT\u003e task);\n```\n\nYou should be able to get a Future this way:\n\n```\nqueue.getDefaultQueue().submit(\n              new Callable\u003c\u003e() {\n                @Override\n                public Void call() {\n                  repoFolders.stream().forEach(DeleteTrashFolders.this::evaluateIfTrash);\n                  return null;\n                }\n\n                @Override\n                public String toString() {\n                  return \"DeleteTrashFolders\";\n                }\n              });\n```\n\nIf it doesn\u0027t work, let\u0027s stick with your implementation.",
      "parentUuid": "0dfff679_5bc83e9c",
      "range": {
        "startLine": 102,
        "startChar": 23,
        "endLine": 102,
        "endChar": 29
      },
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5c45e769_fb3d1c2b",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 102,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-11-11T22:47:34Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "27d7179e_9c192033",
      "range": {
        "startLine": 102,
        "startChar": 23,
        "endLine": 102,
        "endChar": 29
      },
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b7e19197_815d5eb3",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2025-10-30T18:42:47Z",
      "side": 1,
      "message": "`evaluateIfTrash` might try uncheched exception. Might be worth catching them.",
      "range": {
        "startLine": 106,
        "startChar": 70,
        "endLine": 106,
        "endChar": 85
      },
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8b9526e0_d5b25a12",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-10-31T09:49:36Z",
      "side": 1,
      "message": "Good point, maybe we can return a boolean or better an Optional of an Exception, in case of errors.",
      "parentUuid": "b7e19197_815d5eb3",
      "range": {
        "startLine": 106,
        "startChar": 70,
        "endLine": 106,
        "endChar": 85
      },
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "71f53ad3_c76de7cc",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 106,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-11-11T22:47:34Z",
      "side": 1,
      "message": "I tried to catch them; however, I\u0027m not sure what to do when catching them.\nThey weren\u0027t caught before, so I\u0027d prefer to leave the existing logic untouched so as not to introduce regressions or changes in behaviour.",
      "parentUuid": "8b9526e0_d5b25a12",
      "range": {
        "startLine": 106,
        "startChar": 70,
        "endLine": 106,
        "endChar": 85
      },
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "746ce7c4_73a52d6d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 141,
      "author": {
        "id": 1054778
      },
      "writtenOn": "2025-10-30T18:42:47Z",
      "side": 1,
      "message": "We should stop the taks here.",
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "696aeee1_4acff829",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/deleteproject/fs/DeleteTrashFolders.java",
        "patchSetId": 1
      },
      "lineNbr": 141,
      "author": {
        "id": 1006192
      },
      "writtenOn": "2025-11-05T21:38:04Z",
      "side": 1,
      "message": "Good point, however, it\u0027s unrelated to this change, possibly a follow-up?",
      "parentUuid": "746ce7c4_73a52d6d",
      "revId": "ecf0f29c3021ca0cff75b574ff7f831ad03c8ac9",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}